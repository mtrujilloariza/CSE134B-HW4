<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="utf-8">
	<title>Marlon's Native Dialogs</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<template id="alertTemplate">
		<p></p>
		<button>Confirm</button>
	</template>

	<template id="confirmTemplate">
		<p></p>
		<button id="cancel">Cancel</button>
		<button id="confirm">Confirm</button>
	</template>

	<template id="promptTemplate">
		<p></p>
		<input type="text">
		<button id="cancel">Cancel</button>
		<button id="confirm">Confirm</button>
	</template>
</head>

<body>
	<h2>Native Dialogs</h2>
	<button id="alert">Alert</button>
	<button id="confirm">Confirm</button>
	<button id="prompt">Prompt</button>
	<button id="saferPrompt">Safer Prompt</button>

	<br>
	<br>

	<h2>Custom Dialogs</h2>
	<button id="customAlert">Custom Alert</button>
	<button id="customConfirm">Custom Confirm</button>
	<button id="customPrompt">Custom Prompt</button>

	<br>
	<br>

	<output id="output" style="border: 2px black solid; width: 500px; height: 500px; display: inline-block;"></output>

	<dialog></dialog>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.0/purify.min.js"></script>
	<script type="module">
		import { customAlertFunc, customConfirmFunc, customPromptFunc } from '/customdialog.js';

		window.addEventListener('load', init);

		function init() {
			document.getElementById('alert').addEventListener('click', function () {
				alert('This is an alert!');
			});

			document.getElementById('confirm').addEventListener('click', function () {
				var result = confirm('do you confirm?');
				// set the output of the confirm dialog to the output element
				document.getElementById('output').innerHTML = `The value returned by the confirm method is : ${result}`;
			});

			document.getElementById('prompt').addEventListener('click', function () {
				var result = prompt('this is a prompt');
				if (result == '') {
					document.getElementById('output').innerHTML = 'User did\'t enter a anything';
				} else {
					document.getElementById('output').innerHTML = `${result}`;
				}
			});

			document.getElementById('saferPrompt').addEventListener('click', function () {
				var result = prompt('this is a prompt');
				if (result == '') {
					document.getElementById('output').innerHTML = 'User did\'t enter a anything';
				} else {
					document.getElementById('output').innerHTML = DOMPurify.sanitize(`${result}`);
				}
			});

			document.getElementById('customAlert').addEventListener('click', function () {
				customAlertFunc('This is a custom alert');
			});

			document.getElementById('customConfirm').addEventListener('click', function () {
				var result = customConfirmFunc('This is a custom confirm');

				result.then((value) => {
					document.getElementById('output').innerHTML = `The value returned by the confirm method is : ${value}`;
				});
			});

			document.getElementById('customPrompt').addEventListener('click', function () {
				var result = customPromptFunc('This is a custom prompt');

				result.then((value) => {
					if (value == '') {
						document.getElementById('output').innerHTML = 'User did\'t enter a anything';
					} else {
						document.getElementById('output').innerHTML = DOMPurify.sanitize(`${value}`);
					}
				});
			});
		}
	</script>
</body>

</html>